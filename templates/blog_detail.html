{% extends 'base.html' %}
{% block title %}{{ post.title }} | GURU{% endblock %}

{% block content %}
<div class="container mt-4">
  <!-- Post Card -->
  <div class="card shadow-sm mb-3" style="border: 1px solid black;">
    
    <div class="card-body d-flex flex-column">
      <h2>{{ post.title }}</h2>
      <p class="text-muted">By {{ post.author }} | {{ post.created_at|date:"M d, Y H:i" }}</p>
      <p>{{ post.content }}</p>
      {% if post.image %}
  <img src="{{ post.image.url }}" class="card-img-top mb-3 rounded" style="width: 250px; height: 150px; object-fit: cover;" alt="{{ post.title }}">
  {% endif %}
      <!-- Post Reactions -->
      <form method="post" class="mb-2">
        {% csrf_token %}
        <button name="reaction_post" value="like" class="btn btn-outline-primary btn-sm">üëç Like</button>
        <button name="reaction_post" value="love" class="btn btn-outline-danger btn-sm">‚ù§Ô∏è Love</button>
        <button name="reaction_post" value="dislike" class="btn btn-outline-secondary btn-sm">üëé Dislike</button>
      </form>
      <p class="mt-2">
        {% for r in post_reactions %}
          {{ r.reaction_type }}: {{ r.count }} |
        {% endfor %}
      </p>
    </div>
  </div>

  <!-- Comments Section -->
  <h4>Comments</h4>
  <form method="post">
    {% csrf_token %}
    <textarea name="comment" class="form-control mb-2" placeholder="Write a comment..."></textarea>
    <button type="submit" class="btn btn-success btn-sm">Post Comment</button>
  </form>

  {% for comment in comments %}
    {% include "comment.html" with comment=comment %}
  {% empty %}
    <p>No comments yet.</p>
  {% endfor %}
</div>
{% endblock %}
