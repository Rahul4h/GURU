<div class="mt-3 p-2 rounded" style="border: 1px solid black;">

  <strong>{{ comment.user }}</strong> ({{ comment.created_at|date:"M d, Y H:i" }})
  <p>{{ comment.content }}</p>

  <!-- Comment Reactions -->
  <form method="post" class="d-inline">
    {% csrf_token %}
    <input type="hidden" name="comment_id" value="{{ comment.id }}">
    <button name="reaction_comment" value="like" class="btn btn-sm btn-outline-primary">👍</button>
    <button name="reaction_comment" value="love" class="btn btn-sm btn-outline-danger">❤️</button>
    <button name="reaction_comment" value="dislike" class="btn btn-sm btn-outline-secondary">👎</button>
  </form>
  <span class="ml-2">
    {% for r in comment.reaction_counts %}
      {{ r.reaction_type }}: {{ r.count }} |
    {% endfor %}
  </span>

  <!-- Reply Form -->
  <form method="post" class="mt-1">
    {% csrf_token %}
    <input type="hidden" name="parent_id" value="{{ comment.id }}">
    <textarea name="comment" class="form-control mb-1" placeholder="Reply..."></textarea>
    <button type="submit" class="btn btn-sm btn-success">Reply</button>
  </form>

  <!-- Nested Replies -->
  <div class="ml-4 mt-2">
    {% for reply in comment.replies.all %}
      {% include "comment.html" with comment=reply %}
    {% endfor %}
  </div>
</div>
